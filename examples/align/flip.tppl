// Run with 100 samples for both is, smc-direct, and smc-dynamic // Direct smc fails completely in this case

function flip(p) {
  sample(bernoulli(p))
}

weight(log(2))
if flip(0.5) then {
  weight(log(1))
  weight(log(100))
  true
} else {
  weight(log(100))
  false
}
weight(log(4))
