// Run with 100 samples for both is, smc-direct, and smc-dynamic
// Direct smc fails completely in this case

function flip() {
  sample(bernoulli(0.5))
}

weight(log(2))
r = if flip() then {
  weight(log(0.5))
  weight(log(2000))
  true
} else {
  weight(log(1000))
  false
}
weight(log(3))
r
