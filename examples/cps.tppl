function sim(stop, lambda) {
  t ~ exponential(lambda)
  if t <= stop then {
    weight(2.0)
    resample()
    sim(stop-t, lambda+0.1)
  } else t
}

lambda ~ gamma(1.0, 1.0)
stop ~ gamma(10.0, 3.0)
sim = sim(stop, lambda)
weight(sim + lambda)
resample()
lambda
